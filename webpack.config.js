// Import the original config from the @wordpress/scripts package.
const defaultConfig = require( '@wordpress/scripts/config/webpack.config' );

// Plugin to remove empty emitted scripts
const RemoveEmptyScriptsPlugin = require( 'webpack-remove-empty-scripts' );

// Export the webpack config.
module.exports = {
	...defaultConfig,
	entry: {
		...defaultConfig.entry(),
		'store': './src/store/index.js',
		'button-icon': './src/button-icon/index.js',
		'button-icon-styles': './src/button-icon/style.scss',
		'button-icon-editor': './src/button-icon/editor.scss',
	},
	plugins: [
		// Very important! Include WP's plugin config or the
		// world will cease to exist as we know it.
		...defaultConfig.plugins,
		// Removes the empty `.js` files generated by webpack but
		// sets it after WP has generated its `*.asset.php` file.
		new RemoveEmptyScriptsPlugin( {
			stage: RemoveEmptyScriptsPlugin.STAGE_AFTER_PROCESS_PLUGINS,
		} ),
	],
};
